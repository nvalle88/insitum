@model insitum.ObjectModel.SupervisorRequest

@{
    ViewBag.Title = "Compromisos";
}
<!-- MAIN CONTENT -->
<div id="content">
    <section id="widget-grid" class="">
        <div class="row">
            <article class="col-sm-12 col-md-12 col-lg-12">
                <div class="jarviswidget" id="wid-id-1" data-widget-editbutton="true" data-widget-custombutton="false">

                    <header>

                        <span class="widget-icon"> <i class="fa fa-edit"></i> </span>

                        <h2>Compromisos</h2>
                    </header>
                    <!-- widget div-->

                    <div>
                        <!-- widget edit box -->

                        <div class="jarviswidget-editbox">

                            <!-- This area used as dropdown edit box -->

                        </div>

                        <!-- end widget edit box -->
                        <!-- widget content -->

                        <div class="widget-body">
                            <div class="row col col-lg-12">
                                <form id="buscar" method="post" class="smart-form">
                                    <fieldset>
                                        <article>
                                            <div class="row">
                                                <section class="col col-lg-5">
                                                    <label>Vendedor</label>
                                                    <label class="input">
                                                        @*@Html.DropDownList("IdVendedor", new SelectList(Model.ListaVendedores),"-- Select Status --" , htmlAttributes: new { @class = "form-control" })*@
                                                        @*@Html.DropDownList("IdVendedor", new SelectList(Model.ListaVendedores, "IdVendedor", "NombreApellido"), "Seleccione", htmlAttributes: new { @class = "form-control" })*@
                                                        @Html.DropDownList("IdVendedor", new SelectList(Model.ListaVendedores, "IdVendedor", "NombreApellido"), htmlAttributes: new { @class = "form-control" })
                                                        @Html.ValidationMessageFor(model => model.IdVendedor, "", new { @class = "text-danger" })
                                                    </label>
                                                </section>
                                                <section class="col col-lg-5">
                                                    <label>Cliente</label>
                                                    <label class="input">
                                                        <select id="cliente" name="IdCliente" class="form-control"></select>
                                                    </label>
                                                </section>
                                            </div>
                                            <div class="row">
                                                <section class="col col-lg-5">
                                                    <label>Fecha Inicio</label>
                                                    <label class="input">
                                                        <input name="FechaInicio" value="@Model.FechaInicio.ToShortDateString()" placeholder="@DateTime.Now.ToShortDateString()" readonly="readonly" class="form-control datepicker" data-dateformat='dd/mm/yy' />
                                                    </label>
                                                </section>
                                                <section class="col col-lg-5">
                                                    <label>Fecha Fin</label>
                                                    <label class="input">
                                                        <input name="FechaFin" value="@Model.FechaFin.ToShortDateString()" placeholder="@DateTime.Now.ToShortDateString()" readonly="readonly" class="form-control datepicker" data-dateformat='dd/mm/yy' />
                                                    </label>
                                                </section>
                                                <section class="col col-lg-2">
                                                    <label>&nbsp;&nbsp;&nbsp;&nbsp;</label>
                                                    <button style="height:30px; width:50px" type="submit" id="buscar" class="btn btn-default butoon">
                                                        <i class="fa fa-search fa-lg"></i>
                                                    </button>
                                                </section>
                                            </div>
                                        </article>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="jarviswidget" id="wid-id-1" data-widget-editbutton="false">
                    <header>
                        <h2>Lista Compromiso</h2>
                    </header>
                    <!-- widget div-->
                    <div>
                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->
                        </div>
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div class="widget-body no-padding">
                            <table id="datatable_fixed_column" class="table table-striped table-bordered table-hover" width="100%">
                                <thead>
                                    <tr>
                                        <th>
                                            @Html.DisplayNameFor(model => model.Listarcompromiso.FirstOrDefault().Descripcion)
                                        </th>
                                        <th>
                                            @Html.DisplayNameFor(model => model.Listarcompromiso.FirstOrDefault().Solucion)
                                        </th>
                                        <th>
                                            @Html.DisplayNameFor(model => model.Listarcompromiso.FirstOrDefault().Fecha)
                                        </th>
                                        @*<th>Opciones</th>*@
                                    </tr>
                                </thead>
                                <tbody>
                                    @*@if (modelo.Listarcompromiso != null)
                                        {*@
                                    @foreach (var item in Model.Listarcompromiso)
                                    {
                                        <tr>

                                            <td>
                                                @Html.DisplayFor(modelItem => item.Descripcion)

                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.Solucion)

                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.Fecha, "ShortDateTime")

                                            </td>
                                            @*<td>
                                                    Html.ActionLink("Detalle", "Edit", new { id = item.idVisita }) |

                                                    @Html.ActionLink("Desactivar", "Delete", new { id = item.IdUsuario }, new { onclick = "return confirm('Desea desactivar supervisor... ?');" })

                                                </td>*@
                                        </tr>
                                        @*}*@
                                    }
                                </tbody>
                            </table>
                        </div>
                        <!-- end widget content -->
                    </div>
                </div>
            </article>
        </div>
    </section>

</div>

<!-- END MAIN CONTENT -->

@section pagespecific{
    <!-- PAGE RELATED PLUGIN(S) -->
    <link rel="stylesheet" type="text/css" href="~/Scripts/libs/Tablas/tablaCss.css">
    <script type="text/javascript" charset="utf8" src="~/Scripts/libs/Tablas/scriptTabla.js"></script>
    <script src="~/Scripts/tabla/init.js"></script>
    <link href="~/Content/css/Personalizado.css" rel="stylesheet" />
    <link href="~/Scripts/libs/waitMe/waitMe.css" rel="stylesheet" />
    <link href="~/Scripts/libs/waitMe/waitMe.min.css" rel="stylesheet" />
    <script src="~/Scripts/libs/waitMe/waitMe.min.js"></script>


    <script type="text/javascript">

          cargaAll();
        // Cliente por Vendedor

         $("#IdVendedor").change(cargaAll);

        function cargaAll() {
        //mostrarLoadingPanel("content", "Cargando...")

       $("#cliente").empty();

        $.ajax({
        type: 'POST',
        url: '@Url.Action("ClienteVendor")',
        dataType: 'json',
            data: { idVendedor: $("#IdVendedor").val() },
            success: function (data) {
                if (data == true) {
                    alert("");
                    return false;
                }
        $("#cliente").append('<option value="0" selected="selected" disabled="">Seleccione</option>');
        $.each(data, function (i, data) {

            $("#cliente").append('<option value="' + data.IdCliente + '">' + data.Nombre +" "+ data.Apellido + ' </option>');

        });
        }, complete: function (data) {
        $("#content").waitMe("hide");
        },

        error: function (ex) {
        alert('Failed to retrieve data.' + ex);
        }
        });
        return false;
        }
    </script>
}




